import axios from 'axios'
import React, { useEffect, useState } from 'react'
import { motion, AnimatePresence } from 'framer-motion'
import ProgressBar from './ProgressBar'

export default function DetailPokemon({pokeDetailName, isDetail, setIsDetail, setPokeDetailName}) {
    const [pkkData, setPkkData] = useState([])
    
     async function fetchPokemon (pokeDetailName) {
       if (pokeDetailName !== '') {
        const data = await axios.get(`https://pokeapi.co/api/v2/pokemon/${pokeDetailName}`)
        setPkkData([data.data])
       }
    }
    
    useEffect(() => {
      fetchPokemon(pokeDetailName)
    },[pokeDetailName])

    function exitDetail() {
      setIsDetail(false)
      setPokeDetailName('')
      setPkkData([])
    }

    return (
    <AnimatePresence mode='wait'>
    <motion.div
    initial={{
      scaleX: 0,
      scaley: 0
    }}
    animate= {{
      scaleX:1,
      scaleY: 1
    }}
    transition={{
      duration: 1,
      type: 'spring', stiffness: 400, damping: 17,
      
    }}
    layout
    className='fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-black-b max-w-[900px] w-full max-h-[400px]
     rounded-4xl max-lg:overflow-y-scroll scrollbar m-2'>
        {isDetail && pkkData.map((pokemon) => {
            const type = pokemon.types[0].type.name
            const type2 = pokemon.types[1] ? pokemon.types[1].type.name : ''
            return (
              <div key={pokemon.id} className='flex flex-col lg:flex-row  gap-10 ml-10 mr-10  '>
                <div className={`flex flex-col gap-5 items-center m-auto max-w-[250px] w-full  
                    h-[400px] `}>
                      <img className='w-66 absolute bottom-42 lg:bottom-72'src={pokemon.sprites.other.home.front_default}></img>
                      <p className='text-xl font-semibold mt-60 lg:mt-34 '>{pokemon.id >=100 ? ('#' + pokemon.id) : pokemon.id >=10 ? ('#0'+ pokemon.id) : '#00'+ pokemon.id }</p>
                      <div>
                        <p className='text-4xl  capitalize font-semibold line-clamp-1'>{pokemon.name}</p>
                      </div>
                      <div className='flex gap-4'>
                        <p className={`bg-${type} pt-2 pb-2 pl-4 pr-6 flex items-center gap-2 capitalize rounded-xl`}><img src={`../assets/pokemonTypes/${type}.svg`}></img>{pokemon.types[0].type.name}</p>
                        {pokemon.types[1] && <p className={`bg-${type2} pt-2 pb-2 pl-4 pr-6 flex items-center gap-2 capitalize rounded-xl`}><img src={`../assets/pokemonTypes/${type2}.svg`}></img>{pokemon.types[1].type.name}</p>}
                      </div>
                      <div className='flex gap-4 font-semibold'>
                          <div className='flex flex-col items-center gap-2'>
                              <p className='flex gap-2'><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="#fff" d="M19 4.00227H17.55C17.4306 3.63758 17.244 3.29842 17 3.00227C16.717 2.6859 16.3702 2.43318 15.9823 2.2608C15.5945 2.08842 15.1744 2.0003 14.75 2.00227H9.27C8.8422 1.99745 8.41832 2.08419 8.02681 2.25667C7.63529 2.42914 7.28519 2.68336 7 3.00227C6.74885 3.29682 6.55547 3.63608 6.43 4.00227H5C4.20435 4.00227 3.44129 4.31834 2.87868 4.88094C2.31607 5.44355 2 6.20662 2 7.00226V19.0023C2 19.7979 2.31607 20.561 2.87868 21.1236C3.44129 21.6862 4.20435 22.0023 5 22.0023H19C19.7956 22.0023 20.5587 21.6862 21.1213 21.1236C21.6839 20.561 22 19.7979 22 19.0023V7.00226C22 6.20662 21.6839 5.44355 21.1213 4.88094C20.5587 4.31834 19.7956 4.00227 19 4.00227ZM8.52 4.34227C8.61371 4.2356 8.72906 4.15011 8.85838 4.09148C8.9877 4.03286 9.12802 4.00244 9.27 4.00227H14.73C14.872 4.00244 15.0123 4.03286 15.1416 4.09148C15.2709 4.15011 15.3863 4.2356 15.48 4.34227C15.5744 4.44727 15.6454 4.57106 15.6885 4.70549C15.7316 4.83993 15.7457 4.98197 15.73 5.12227L15.23 9.12226C15.2005 9.36617 15.0823 9.5907 14.8979 9.75301C14.7134 9.91531 14.4757 10.004 14.23 10.0023H12.59L13.73 7.60226C13.8224 7.36691 13.8223 7.10528 13.7296 6.87004C13.6369 6.63479 13.4585 6.4434 13.2303 6.3344C13.0022 6.22539 12.7412 6.20686 12.4999 6.28254C12.2587 6.35822 12.055 6.52248 11.93 6.74226L10.37 10.0023H9.77C9.52432 10.004 9.28659 9.91531 9.10215 9.75301C8.91771 9.5907 8.79948 9.36617 8.77 9.12226L8.27 5.12227C8.25425 4.98197 8.26839 4.83993 8.31148 4.70549C8.35457 4.57106 8.42563 4.44727 8.52 4.34227ZM20 19.0023C20 19.2675 19.8946 19.5218 19.7071 19.7094C19.5196 19.8969 19.2652 20.0023 19 20.0023H5C4.73478 20.0023 4.48043 19.8969 4.29289 19.7094C4.10536 19.5218 4 19.2675 4 19.0023V7.00226C4 6.73705 4.10536 6.48269 4.29289 6.29516C4.48043 6.10762 4.73478 6.00226 5 6.00226H6.37L6.79 9.37226C6.88069 10.1022 7.23638 10.7733 7.78946 11.2582C8.34255 11.7431 9.05449 12.0079 9.79 12.0023H14.25C14.9855 12.0079 15.6975 11.7431 16.2505 11.2582C16.8036 10.7733 17.1593 10.1022 17.25 9.37226L17.63 6.00226H19C19.2652 6.00226 19.5196 6.10762 19.7071 6.29516C19.8946 6.48269 20 6.73705 20 7.00226V19.0023ZM14 16.0023H10C9.73478 16.0023 9.48043 16.1076 9.29289 16.2952C9.10536 16.4827 9 16.737 9 17.0023C9 17.2675 9.10536 17.5218 9.29289 17.7094C9.48043 17.8969 9.73478 18.0023 10 18.0023H14C14.2652 18.0023 14.5196 17.8969 14.7071 17.7094C14.8946 17.5218 15 17.2675 15 17.0023C15 16.737 14.8946 16.4827 14.7071 16.2952C14.5196 16.1076 14.2652 16.0023 14 16.0023Z"></path></svg>
                              {`${pokemon.weight / 10}`} kg</p>
                              <p>Weight</p>
                          </div>
                          <div className='flex flex-col items-center gap-2'>
                            <p className='flex gap-2'><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="#fff" d="M21 2.00232H3C2.73478 2.00232 2.48043 2.10768 2.29289 2.29521C2.10536 2.48275 2 2.7371 2 3.00232V21.0023C2 21.2675 2.10536 21.5219 2.29289 21.7094C2.48043 21.897 2.73478 22.0023 3 22.0023H9C9.26522 22.0023 9.51957 21.897 9.70711 21.7094C9.89464 21.5219 10 21.2675 10 21.0023V10.0023H21C21.2652 10.0023 21.5196 9.89696 21.7071 9.70943C21.8946 9.52189 22 9.26754 22 9.00232V3.00232C22 2.7371 21.8946 2.48275 21.7071 2.29521C21.5196 2.10768 21.2652 2.00232 21 2.00232ZM20 8.00232H18V7.00232C18 6.7371 17.8946 6.48275 17.7071 6.29521C17.5196 6.10768 17.2652 6.00232 17 6.00232C16.7348 6.00232 16.4804 6.10768 16.2929 6.29521C16.1054 6.48275 16 6.7371 16 7.00232V8.00232H14V7.00232C14 6.7371 13.8946 6.48275 13.7071 6.29521C13.5196 6.10768 13.2652 6.00232 13 6.00232C12.7348 6.00232 12.4804 6.10768 12.2929 6.29521C12.1054 6.48275 12 6.7371 12 7.00232V8.00232H10V7.00232C10 6.7371 9.89464 6.48275 9.70711 6.29521C9.51957 6.10768 9.26522 6.00232 9 6.00232C8.73478 6.00232 8.48043 6.10768 8.29289 6.29521C8.10536 6.48275 8 6.7371 8 7.00232V8.00232H7C6.73478 8.00232 6.48043 8.10768 6.29289 8.29521C6.10536 8.48275 6 8.7371 6 9.00232C6 9.26754 6.10536 9.52189 6.29289 9.70943C6.48043 9.89696 6.73478 10.0023 7 10.0023H8V12.0023H7C6.73478 12.0023 6.48043 12.1077 6.29289 12.2952C6.10536 12.4827 6 12.7371 6 13.0023C6 13.2675 6.10536 13.5219 6.29289 13.7094C6.48043 13.897 6.73478 14.0023 7 14.0023H8V16.0023H7C6.73478 16.0023 6.48043 16.1077 6.29289 16.2952C6.10536 16.4827 6 16.7371 6 17.0023C6 17.2675 6.10536 17.5219 6.29289 17.7094C6.48043 17.897 6.73478 18.0023 7 18.0023H8V20.0023H4V4.00232H20V8.00232Z"></path></svg>
                            {`${pokemon.height / 10}`} m</p>
                            <p>Height</p>
                          </div>
                      </div>
                </div>
                <div className='flex mt-10 lg:mt-0 justify-between lg:flex-col items-center sm:gap-4'>
                    <div className='w-[1px] h-9 lg:h-32 bg-white rotate-[90deg] lg:rotate-0 to-100%'></div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="56" height="56" fill="none" viewBox="0 0 56 56"><path fill="#fff" fillOpacity="0.25" d="M28.1478 4.51135C40.5193 4.51135 50.6682 14.0049 51.6974 26.1045H36.983C36.1071 21.9436 32.4176 18.8119 27.9945 18.8119C23.5715 18.8119 19.8819 21.9436 19.0061 26.1045H4.59824C5.63832 14.0049 15.7873 4.51135 28.1478 4.51135ZM33.0635 26.1045C33.2825 26.6958 33.4029 27.3309 33.4029 27.9989H33.4139C33.4139 28.6668 33.2934 29.3019 33.0745 29.8932C32.3081 31.9518 30.3265 33.4081 28.0055 33.4081C25.6845 33.4081 23.7028 31.9408 22.9365 29.8932C22.7175 29.3019 22.5971 28.6668 22.5971 27.9989H22.5861C22.5861 27.3309 22.7065 26.6958 22.9255 26.1045C23.6919 24.0459 25.6735 22.5896 27.9945 22.5896C30.3155 22.5896 32.2972 24.0569 33.0635 26.1045ZM27.8413 51.4973C15.4698 51.4973 5.32082 42.0038 4.29169 29.9041H19.0061C19.8819 34.0651 23.5715 37.1968 27.9945 37.1968C32.4176 37.1968 36.1071 34.0651 36.983 29.9041H51.4018C50.3617 41.9928 40.2127 51.4973 27.8413 51.4973ZM27.9945 0C12.5357 0 0 12.5376 0 27.9989C0 43.4601 12.5357 55.9977 27.9945 55.9977C43.4534 55.9977 56 43.471 56 27.9989C56 12.5267 43.4643 0 27.9945 0Z"></path></svg>
                    <div className='w-[1px]  h-9 lg:h-32 bg-white rotate-[90deg] lg:rotate-0 '></div>
                </div>
                <div className='flex flex-col text-lg gap-2 justify-center capitalize mb-5'>
                    <h1 className='text-3xl font-semibold'>Stats</h1>
                    <ProgressBar statName={pokemon.stats[0].stat.name} statNum={pokemon.stats[0].base_stat}></ProgressBar>
                    <ProgressBar statName={pokemon.stats[1].stat.name} statNum={pokemon.stats[1].base_stat}></ProgressBar>
                    <ProgressBar statName={pokemon.stats[2].stat.name} statNum={pokemon.stats[2].base_stat}></ProgressBar>
                    <ProgressBar statName={pokemon.stats[3].stat.name} statNum={pokemon.stats[3].base_stat}></ProgressBar>
                    <ProgressBar statName={pokemon.stats[4].stat.name} statNum={pokemon.stats[4].base_stat}></ProgressBar>
                    <ProgressBar statName={pokemon.stats[5].stat.name} statNum={pokemon.stats[5].base_stat}></ProgressBar>
                </div>
                <div onClick={exitDetail} className='absolute right-1 sm:right-5 top-2 cursor-pointer'>
                  <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="none" viewBox="0 0 48 48"><path fill="#fff" d="M31.4199 16.58C31.234 16.3925 31.0128 16.2438 30.7691 16.1422C30.5253 16.0407 30.2639 15.9884 29.9999 15.9884C29.7359 15.9884 29.4745 16.0407 29.2308 16.1422C28.987 16.2438 28.7658 16.3925 28.5799 16.58L23.9999 21.18L19.4199 16.58C19.0433 16.2034 18.5325 15.9918 17.9999 15.9918C17.4673 15.9918 16.9565 16.2034 16.5799 16.58C16.2033 16.9566 15.9917 17.4674 15.9917 18C15.9917 18.5326 16.2033 19.0434 16.5799 19.42L21.1799 24L16.5799 28.58C16.3925 28.7659 16.2437 28.9871 16.1421 29.2309C16.0406 29.4746 15.9883 29.736 15.9883 30C15.9883 30.264 16.0406 30.5254 16.1421 30.7692C16.2437 31.0129 16.3925 31.2341 16.5799 31.42C16.7658 31.6075 16.987 31.7563 17.2308 31.8578C17.4745 31.9593 17.7359 32.0116 17.9999 32.0116C18.2639 32.0116 18.5253 31.9593 18.7691 31.8578C19.0128 31.7563 19.234 31.6075 19.4199 31.42L23.9999 26.82L28.5799 31.42C28.7658 31.6075 28.987 31.7563 29.2308 31.8578C29.4745 31.9593 29.7359 32.0116 29.9999 32.0116C30.2639 32.0116 30.5253 31.9593 30.7691 31.8578C31.0128 31.7563 31.234 31.6075 31.4199 31.42C31.6074 31.2341 31.7562 31.0129 31.8577 30.7692C31.9592 30.5254 32.0115 30.264 32.0115 30C32.0115 29.736 31.9592 29.4746 31.8577 29.2309C31.7562 28.9871 31.6074 28.7659 31.4199 28.58L26.8199 24L31.4199 19.42C31.6074 19.2341 31.7562 19.0129 31.8577 18.7692C31.9592 18.5254 32.0115 18.264 32.0115 18C32.0115 17.736 31.9592 17.4746 31.8577 17.2309C31.7562 16.9871 31.6074 16.7659 31.4199 16.58V16.58ZM38.1399 9.86001C36.295 7.9498 34.0881 6.42616 31.648 5.37798C29.2079 4.3298 26.5835 3.77807 23.9279 3.755C21.2724 3.73192 18.6388 4.23795 16.1808 5.24357C13.7229 6.24919 11.4899 7.73425 9.61202 9.61211C7.73416 11.49 6.2491 13.723 5.24348 16.1809C4.23786 18.6389 3.73183 21.2724 3.75491 23.928C3.77798 26.5836 4.32971 29.208 5.37789 31.6481C6.42607 34.0882 7.94971 36.2951 9.85991 38.14C11.7049 40.0502 13.9117 41.5739 16.3518 42.622C18.7919 43.6702 21.4163 44.2219 24.0719 44.245C26.7275 44.2681 29.3611 43.7621 31.819 42.7564C34.2769 41.7508 36.51 40.2658 38.3878 38.3879C40.2657 36.5101 41.7507 34.277 42.7564 31.8191C43.762 29.3612 44.268 26.7276 44.2449 24.072C44.2219 21.4164 43.6701 18.792 42.6219 16.3519C41.5738 13.9118 40.0501 11.7049 38.1399 9.86001V9.86001ZM35.3199 35.32C32.704 37.9388 29.261 39.5697 25.5775 39.9346C21.894 40.2996 18.1979 39.3761 15.119 37.3216C12.04 35.267 9.76863 32.2084 8.69186 28.667C7.61509 25.1255 7.79952 21.3203 9.21374 17.8996C10.628 14.4789 13.1845 11.6543 16.4477 9.90713C19.7109 8.15996 23.479 7.59827 27.1099 8.31775C30.7409 9.03724 34.01 10.9934 36.3604 13.8529C38.7108 16.7125 39.997 20.2985 39.9999 24C40.0071 26.1026 39.5971 28.1857 38.7938 30.1288C37.9905 32.0719 36.8097 33.8363 35.3199 35.32V35.32Z"></path></svg>
                </div>
              </div>
            )
        })}
    </motion.div>
    </AnimatePresence>
  )
}
